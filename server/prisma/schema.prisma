generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  username  String   @unique @db.VarChar(255)
  password  String   @db.VarChar(255)
  avatarUrl String   @db.Text
  email     String   @unique @db.VarChar(255)
  searchs   Search[]
}

model Search {
    id           Int    @id @default(autoincrement())
    query        String @db.VarChar(255)
    locationId   String?
    minPrice     String?
    maxPrice     String?
    userId       Int
    user         User?  @relation(fields: [userId], references: [id])
    Articles     Article[]
}
model Location {
    id   String @id @db.VarChar(255)
    name String @db.VarChar(255)
}
model Category{
    id      String @id @db.VarChar(255)
    name    String @db.VarChar(255)
}
model Source{
    id               String @id @db.VarChar(255)
    name             String @db.VarChar(255)
    hasLargeImages   Boolean
    hasPrice         Boolean
}

model Article{
   id             Int      @id @default(autoincrement())
   Search         Search?  @relation(fields: [searchId], references: [id])
   searchId       Int
   articleId      Int     @unique
   title          String  @db.VarChar(255)
   description    String?  @db.Text
   price          Float?
   categoryId     Int
   distance       Int?
   timestamp      Int
   thumbnail      String? @db.VarChar(255)
   location       String? @db.VarChar(255)
   externalId     String  @db.VarChar(255)
   sourceId       Int
   crawlerId      Int
   sourceUrl      String  @db.Text
}
